# Render.com 배포 설정 파일
# 이 파일을 사용하면 Render 대시보드에서 수동 설정 없이 배포할 수 있습니다.

services:
  # 백엔드 API 서버
  - type: web
    name: coffee-order-api
    env: node
    plan: free
    buildCommand: npm install
    startCommand: npm start
    rootDir: server
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      # PostgreSQL 데이터베이스 연결 정보
      # Render 대시보드에서 PostgreSQL 서비스를 생성하면
      # DATABASE_URL이 자동으로 제공됩니다.
      # 아래는 개별 환경 변수를 사용하는 경우의 예시입니다.
      # 실제로는 Render 대시보드에서 직접 설정해야 합니다.
      - key: DB_HOST
        sync: false  # 수동으로 설정 필요
      - key: DB_PORT
        value: 5432
      - key: DB_NAME
        value: coffee_order_db
      - key: DB_USER
        sync: false  # 수동으로 설정 필요
      - key: DB_PASSWORD
        sync: false  # 수동으로 설정 필요

  # 프런트엔드 정적 사이트
  - type: web
    name: coffee-order-app
    env: static
    plan: free
    buildCommand: npm install && npm run build
    staticPublishPath: ./ui/dist
    rootDir: ui
    envVars:
      - key: VITE_API_URL
        sync: false  # 백엔드 URL을 수동으로 설정 필요
        # 예: https://coffee-order-api.onrender.com/api

databases:
  # PostgreSQL 데이터베이스
  - name: coffee-order-db
    databaseName: coffee_order_db
    user: coffee_order_user
    plan: free

